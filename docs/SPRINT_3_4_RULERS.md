# SPRINT 3.4: ЛІНІЙКИ - РЕАЛІЗОВАНО

## ЩО ЗРОБЛЕНО

### 1. Створено gui/rulers.py
- **RulerWidget(QWidget)** - базовий клас лінійки
- **HorizontalRuler** - горизонтальна лінійка (alias)
- **VerticalRuler** - вертикальна лінійка (alias)

### 2. Функціонал RulerWidget

#### Параметри:
- `orientation`: Qt.Horizontal або Qt.Vertical
- `length_mm`: довжина лінійки у мм
- `dpi`: DPI canvas (203)
- `scale`: масштаб синхронізації з canvas (2.5x)

#### Візуальні характеристики:
- **Фон**: #F0F0F0 (світло-сірий)
- **Товщина**: 25 пікселів
- **Основні поділки**: кожні 5 мм
  - Довжина риски: 10px
  - Товщина: 2px
  - Колір: чорний
  - Підписи: 0, 5, 10, 15, 20, 25
- **Проміжні поділки**: кожен 1 мм
  - Довжина риски: 5px
  - Товщина: 1px
  - Колір: темно-сірий (#646464)
  - Підписи: немає

#### Методи:
- `_mm_to_px(mm)` - конвертація мм → пікселі
- `_draw_ticks(painter)` - малювання поділок
- `_draw_tick(painter, mm, length, color, width)` - окрема поділка
- `_draw_label(painter, mm)` - підпис числа
- `update_scale(scale_factor)` - оновлення масштабу

### 3. Інтеграція у MainWindow

#### Зміни у gui/main_window.py:
1. Додано import: `QWidget, QGridLayout`
2. Додано import: `HorizontalRuler, VerticalRuler`
3. Створення лінійок:
   ```python
   self.h_ruler = HorizontalRuler(length_mm=28, dpi=203, scale=2.5)
   self.v_ruler = VerticalRuler(length_mm=28, dpi=203, scale=2.5)
   ```
4. Layout структура:
   ```
   [corner 25x25] [horizontal ruler]
   [vertical ruler] [canvas]
   ```
5. Використано QGridLayout з spacing=0

### 4. Створено тест

**Файл**: `tests/test_rulers.py`
- Запускає GUI з лінійками
- Додає тестовий текстовий елемент
- Дозволяє перевірити вирівнювання

## ЯК ТЕСТУВАТИ

### Запуск GUI з лінійками:
```cmd
cd D:\AiKlientBank\1C_Zebra
.venv\Scripts\activate
python tests/test_rulers.py
```

### Що перевірити:
1. ✅ Горизонтальна лінійка зверху
2. ✅ Вертикальна лінейка зліва
3. ✅ Поділки кожен 1 мм (дрібні)
4. ✅ Поділки кожні 5 мм (великі з підписами)
5. ✅ Підписи: 0, 5, 10, 15, 20, 25
6. ✅ Canvas з сіткою справа/знизу від лінійок
7. ✅ Вирівнювання сітки та поділок збігається

### Альтернативно - через main.py:
```cmd
python main.py
```
Лінійки будуть видимі одразу при старті додатку.

## ТЕХНІЧНІ ДЕТАЛІ

### Конвертація координат:
```python
# Без масштабу:
px = mm * 203 / 25.4

# З масштабом 2.5x:
px_on_screen = (mm * 203 / 25.4) * 2.5
```

### Приклад для 28 мм:
- Без масштабу: 28 * 203 / 25.4 ≈ 224 px
- З масштабом: 224 * 2.5 = 560 px

### Позиціонування підписів:
- **Горизонтальна**: текст зверху по центру над рискою
- **Вертикальна**: текст зліва з вирівнюванням праворуч

### Шрифт підписів:
- Arial 8pt
- Колір: чорний

## ПОРІВНЯННЯ З ZEBRADESIGNER

На скріншоті ZebraDesigner видно:
- Лінійки зверху та зліва ✅
- Поділки з підписами ✅
- Світлий фон ✅
- Canvas справа/знизу ✅

Наша реалізація відповідає цьому дизайну.

## МОЖЛИВІ ПОКРАЩЕННЯ (майбутнє)

1. **Поточна позиція курсору**
   - Червона лінія на лінійках при hover
   
2. **Підсвічування виділених елементів**
   - Сині маркери меж елемента на лінейках
   
3. **Tooltip при hover**
   - Показати точні мм при наведенні на лінейку
   
4. **Синхронізація scroll**
   - При прокрутці canvas лінейки прокручуються разом
   
5. **Динамічний zoom**
   - update_scale() при зміні масштабу canvas

## ФАЙЛОВА СТРУКТУРА

```
D:\AiKlientBank\1C_Zebra\
├── gui/
│   ├── rulers.py          # NEW: Класи лінійок
│   └── main_window.py     # UPDATED: Інтеграція лінійок
└── tests/
    └── test_rulers.py     # NEW: Тест лінійок
```

## СТАТУС

✅ **ГОТОВО** - Лінейки повністю реалізовані та інтегровані

Наступний крок: Ручне тестування через GUI або додаткові покращення.
